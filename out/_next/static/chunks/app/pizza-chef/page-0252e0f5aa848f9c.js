(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{7368:(e,t,a)=>{Promise.resolve().then(a.bind(a,8628))},8628:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),n=a(2115);function i(){var e;let[t,a]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[r,o]=(0,n.useState)({}),[p,c]=(0,n.useState)(!1),[d,h]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null),[x,z]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),[w,v]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,k]=(0,n.useState)(""),[T,O]=(0,n.useState)([]),D="border border-gray-300 p-2";(0,n.useEffect)(()=>{async function e(){try{let e=await fetch("http://52.53.194.129/pizza/pizzatoppings/");if(!e.ok)throw Error("Failed to fetch toppings");let t=await e.json();l(t)}catch(e){m(e.message),console.error("Fetch failed on resource: toppings/:",e)}finally{h(!1)}}async function t(){try{let e=await fetch("http://52.53.194.129/toppings/");if(!e.ok)throw Error("Failed to fetch toppings");let t=await e.json();O(t)}catch(e){m(e.message),console.error("Fetch failed on resource: toppings/:",e)}finally{h(!1)}}(async function(){try{let e=await fetch("http://52.53.194.129/pizza/");if(!e.ok)throw Error("Failed to fetch pizza");let t=await e.json();a(t)}catch(e){m(e.message),console.error("Fetch failed on resource: pizza/:",e)}finally{h(!1)}})(),e(),t()},[]);let P=async e=>{e.preventDefault();let t=e.target.value;if(!t)return;let a={...r};a.toppings||(a.toppings=[]),a.toppings=[...a.toppings,t];let s=[...i];i.some(e=>e.pizzaName===a.pizzaName)?s=i.map(e=>e.pizzaName===a.pizzaName?a:e):s.push(a),l(s),o(a),console.log("Updated Display Pizza:",a),k(""),v(!1);let n=await fetch("http://52.53.194.129/pizza/pizzatoppings/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pizzaName:a.pizzaName,toppingName:t})});return await n.json()},F=async e=>{e.preventDefault(),await fetch("http://52.53.194.129/pizza/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x})}),a([...t,{name:x}]),z(""),b(!1)},_=(e,s,n)=>{let i=[...t];i[e][s]=n,a(i),z(n)},J=e=>{g(e)},L=async e=>{e.preventDefault();let t=await fetch("http://52.53.194.129/pizza/update/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:f,newName:x})});return z(""),g(""),await t.json()},U=async(e,t)=>{try{(await fetch("http://52.53.194.129/pizza/delete/",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})).ok&&a(e=>e.filter(e=>e.name!==t))}catch(e){console.error("Error deleting pizza:",e)}},A=e=>{console.log(i.length);let t=i.find(t=>{let{pizzaName:a}=t;return a===e});t?o(t):o({pizzaName:e,toppings:[]}),c(!0)},M=async e=>{if(!e)return;let t={...r};t.toppings=t.toppings.filter(t=>t!==e),o(t),l(i.map(e=>e.pizzaName===t.pizzaName?t:e));let a=await fetch("http://52.53.194.129/pizza/pizzatoppings/delete/",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({pizzaName:t.pizzaName,toppingName:e})});return await a.json()};return d?(0,s.jsx)("div",{children:"Loading..."}):u?(0,s.jsxs)("div",{children:["Error: ",u]}):(0,s.jsxs)("div",{className:"store-owner-wrapper w-full h-full flex flex-col space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,s.jsx)("p",{className:"pizzas-header text-4xl font-bold",children:"Manage Pizzas"}),(0,s.jsx)("button",{onClick:()=>{b(!0)},className:"bg-blue-500 text-white py-2 px-6 rounded",children:"New Pizza"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"pizzas-table border table-auto w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:D,children:"Pizza Name"}),(0,s.jsx)("th",{className:D,children:"Tools"})]})}),(0,s.jsxs)("tbody",{children:[t.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:D,children:(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>_(t,"name",e.target.value),onFocus:e=>J(e.target.value),className:"border p-2 w-full"})}),(0,s.jsx)("td",{className:D,children:(0,s.jsxs)("div",{className:"flex space-x-2 justify-center",children:[(0,s.jsx)("button",{className:"bg-blue-500 text-white py-2 px-4 rounded",onClick:L,children:"Update"}),(0,s.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded",onClick:t=>U(t,e.name),children:"Delete"}),(0,s.jsx)("button",{className:"bg-green-500 text-white py-2 px-4 rounded",onClick:()=>A(e.name),children:"View/Edit Toppings"})]})})]},t)),y&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:D,children:(0,s.jsx)("input",{type:"text",value:x,onChange:e=>{z(e.target.value)},className:"border p-2",placeholder:"Enter pizza name"})}),(0,s.jsx)("td",{className:D,children:(0,s.jsx)("button",{onClick:F,className:"bg-green-500 text-white py-2 px-4 rounded",children:"Submit"})})]})]})]})}),p&&(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"pizzas-table border table-auto w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{children:(0,s.jsxs)("th",{colSpan:"100%",className:D,children:[r.pizzaName," Toppings:"]})})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{children:[(null===(e=r.toppings)||void 0===e?void 0:e.length)>0?r.toppings.map((e,t)=>(0,s.jsxs)("td",{className:D,children:[e,(0,s.jsx)("br",{}),(0,s.jsx)("button",{onClick:()=>M(e),className:"bg-red-500 text-white py-1 px-2 rounded",children:"Delete"})]},t)):(0,s.jsx)("td",{colSpan:"100%",className:D,children:"No toppings added"}),w&&(0,s.jsx)("td",{className:D,children:(0,s.jsxs)("select",{value:E,onChange:P,className:"border p-2 rounded w-full",children:[(0,s.jsx)("option",{value:"",children:"Select a topping"}),T.map((e,t)=>(0,s.jsx)("option",{value:e.name,children:e.name},t))]})}),(0,s.jsx)("td",{className:D,children:(0,s.jsx)("button",{onClick:()=>{v(!0)},className:"bg-blue-500 text-white py-2 px-4 rounded w-full",children:"Add Topping"})})]})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(7368)),_N_E=e.O()}]);