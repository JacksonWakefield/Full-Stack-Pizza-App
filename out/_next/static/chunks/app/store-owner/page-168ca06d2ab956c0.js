(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{266:(e,t,a)=>{Promise.resolve().then(a.bind(a,5112))},5112:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(5155),n=a(2115);function r(){let[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!0),[l,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(""),[d,p]=(0,n.useState)(""),[h,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),j="border border-gray-300 p-2";(0,n.useEffect)(()=>{!async function(){try{let e=await fetch("http://127.0.0.1:8000/toppings/");if(!e.ok)throw Error("Failed to fetch toppings");let a=await e.json();t(a)}catch(e){o(e.message),console.error("Fetch failed on resource: toppings/:",e)}finally{r(!1)}}()},[]);let y=async a=>{a.preventDefault(),await fetch("http://127.0.0.1:8000/toppings/create/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i})}),t([...e,{name:i}]),c(""),x(!1)},f=(a,s,n)=>{let r=[...e];r[a][s]=n,t(r),c(n)},N=e=>{p(e)},w=async e=>{e.preventDefault();let t=await fetch("http://127.0.0.1:8000/toppings/update/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:d,newName:i})});return c(""),p(""),await t.json()},v=async(e,a)=>{try{(await fetch("http://localhost:8000/toppings/delete/",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})})).ok&&t(e=>e.filter(e=>e.name!==a))}catch(e){console.error("Error deleting topping:",e)}};return a?(0,s.jsx)("div",{children:"Loading..."}):l?(0,s.jsxs)("div",{children:["Error: ",l]}):(0,s.jsxs)("div",{className:"store-owner-wrapper w-full h-full",children:[(0,s.jsx)("p",{className:"toppings-header text-4xl font-bold",children:"Manage Toppings"}),(0,s.jsx)("button",{onClick:()=>{x(!0)},className:"bg-blue-500 text-white py-2 px-4 rounded mb-4",children:"Add Topping"}),(0,s.jsx)("table",{className:"toppings-table border",children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:j,children:"Topping Name"}),(0,s.jsx)("th",{className:j,children:"Tools"})]}),e.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:j,children:(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>f(t,"name",e.target.value),onFocus:e=>N(e.target.value),className:"border p-1 w-full"})}),(0,s.jsxs)("td",{className:j,children:[(0,s.jsx)("button",{className:"bg-blue-500 text-white py-2 px-4 rounded mx-4 my-2",onClick:w,children:"Update"}),(0,s.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded mx-4 my-2",onClick:t=>v(t,e.name),children:"Delete"})]})]},t)),m&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:j,children:(0,s.jsx)("input",{type:"text",value:i,onChange:e=>{c(e.target.value)},className:"border p-2",placeholder:"Enter topping name"})}),(0,s.jsx)("td",{className:j,children:(0,s.jsx)("button",{onClick:y,className:"bg-green-500 text-white py-2 px-4 rounded",children:"Submit"})})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(266)),_N_E=e.O()}]);